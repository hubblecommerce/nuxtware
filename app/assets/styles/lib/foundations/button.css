/* === BASE COMPONENT === */
@layer components {
    .btn {
        @apply btn-default btn-medium;
        @apply focus-style;
        @apply relative inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-100 cursor-pointer;
        @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none;

        /* Touch device optimizations */
        @media (pointer: coarse) {
            &:before  {
                @apply absolute -inset-2 -z-10;
                content: '';
            }
        }

        @media (hover: hover) {
            &:hover:not(:disabled) {
                @apply bg-btn-shade-dark;
            }
        }

        &:active:not(:disabled) {
            @apply bg-btn-shade-dark;
        }

        @media (prefers-contrast: high) {
            @apply border-2 border-current;
        }

        @media (prefers-reduced-motion: reduce) {
            transition: none;
        }
    }
}

/* === SIZE VARIANTS === */
@utility btn-small {
    @apply text-sm h-10 min-h-10 px-4 py-2;
}

@utility btn-medium {
    @apply text-base h-12 min-h-12 px-6 py-3;
}

@utility btn-large {
    @apply text-lg h-14 min-h-14 px-8 py-4;
}

/* === COLOR VARIANTS === */
@utility btn-primary {
    --color-btn: var(--color-primary);
    --color-btn-shade-light: var(--color-primary-shade-light);
    --color-btn-shade-dark: var(--color-primary-shade-dark);
    --color-btn-content: var(--color-primary-content);
}

@utility btn-secondary {
    --color-btn: var(--color-secondary);
    --color-btn-shade-light: var(--color-secondary-shade-light);
    --color-btn-shade-dark: var(--color-secondary-shade-dark);
    --color-btn-content: var(--color-secondary-content);
}

@utility btn-tertiary {
    --color-btn: var(--color-tertiary);
    --color-btn-shade-light: var(--color-tertiary-shade-light);
    --color-btn-shade-dark: var(--color-tertiary-shade-dark);
    --color-btn-content: var(--color-tertiary-content);
}

/* === STYLE VARIANTS === */
@utility btn-default {
    @apply bg-btn text-btn-content;
}

@utility btn-outline {
    @apply bg-transparent border-2 border-current text-btn active:bg-transparent;

    @media (hover: hover) {
        @apply hover:bg-btn hover:text-btn-content hover:border-btn active:bg-btn-shade-dark;
    }
}

@utility btn-ghost {
    @apply bg-transparent text-btn active:bg-transparent;

    @media (hover: hover) {
        @apply hover:bg-gray-300 hover:text-btn;
    }
}

/* === STATE MODIFIERS === */
@utility btn-loading {
    @apply cursor-wait pointer-events-none;

    &::after {
        @apply absolute w-4 h-4 border-2 border-current rounded-full;
        content: '';
        border-right-color: transparent;
        animation: btn-spin 1s linear infinite;

        @media (prefers-reduced-motion: reduce) {
            animation: none;
        }
    }
}

/* === ANIMATIONS === */
@keyframes btn-spin {
    to {
        transform: rotate(360deg);
    }
}

/* === SHAPE VARIANTS === */
@utility btn-square {
    @apply w-12 h-12 p-0;

    &:where(.btn-small) {
        @apply w-10 h-10 p-0;
    }

    &:where(.btn-medium) {
        @apply w-12 h-12 p-0;
    }

    &:where(.btn-large) {
        @apply w-14 h-14 p-0;
    }
}

@utility btn-circle {
    @apply w-12 h-12 rounded-full p-0;

    &:where(.btn-small) {
        @apply w-10 h-10 rounded-full p-0;
    }

    &:where(.btn-medium) {
        @apply w-12 h-12 rounded-full p-0;
    }

    &:where(.btn-large) {
        @apply w-16 h-16 rounded-full p-0;
    }
}

@utility btn-no-animation {
    @apply active:translate-y-0;
}
