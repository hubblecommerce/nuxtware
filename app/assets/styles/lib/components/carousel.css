/**
 * ComponentCarousel Styles
 * Scroll-snap based carousel with native scrolling behavior
 */

/* Container */
.carousel-container {
    contain: layout style;
}

/* Track (scroll container) - Progressive enhancement */
.carousel-track {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    /* Horizontal padding is handled via inline styles to prevent overflow of absolute elements */
}

/* Enhanced scroll behavior - only applied on client */
.carousel-track.overflow-x-auto {
    /* Scroll snap configuration */
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    
    /* Touch optimization */
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch; /* iOS momentum scrolling */
    overscroll-behavior-x: contain; /* Prevent page scroll on carousel bounds */
    
    /* Performance optimizations */
    will-change: scroll-position;
    transform: translateZ(0); /* Force hardware acceleration */
    
    /* Hide scrollbar while maintaining functionality */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}

.carousel-track.overflow-x-auto::-webkit-scrollbar {
    display: none; /* Chrome/Safari/Webkit */
}

/* Optional styled scrollbars */
.carousel-track.show-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
}

.carousel-track.show-scrollbar::-webkit-scrollbar {
    display: block;
    height: 6px;
}

.carousel-track.show-scrollbar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
}

.carousel-track.show-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
}

.carousel-track.show-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.5);
}

/* Slides container */
.carousel-slides {
    width: 100%;
    height: 100%;
    flex-wrap: nowrap; /* Ensure slides don't wrap */
    /* Gap is handled via inline styles from component */
}

/* Individual slides */
.carousel-slide {
    box-sizing: border-box;
}

/* Enhanced scroll-snap behavior - only when overflow is enabled */
.carousel-track.overflow-x-auto .carousel-slide {
    scroll-snap-align: start;
    scroll-snap-stop: always;
}

/* Items within slides */
.carousel-item {
    min-width: 0; /* Allows flex items to shrink below their content size */
    box-sizing: border-box;
}

.carousel-item-content {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* Navigation buttons */
.carousel-nav {
    backdrop-filter: blur(4px);
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.carousel-nav:hover {
    background-color: rgba(255, 255, 255, 1);
}

/* Dot indicators */
.carousel-indicators {
    backdrop-filter: blur(4px);
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    padding: 8px 12px;
}

/* Responsive adjustments */
@media (max-width: 640px) {
    .carousel-nav {
        width: 32px;
        height: 32px;
    }
    
    .carousel-indicators {
        bottom: 2rem;
    }
}

/* Focus styles for accessibility */
.carousel-container:focus-visible {
    outline: 2px solid var(--color-primary, #3b82f6);
    outline-offset: 2px;
}

.carousel-indicator:focus {
    outline: 2px solid var(--color-primary, #3b82f6);
    outline-offset: 2px;
}

/* Disable text selection during drag */
.carousel-track * {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
}

/* Layout shift prevention overlay */
.carousel-loading-overlay {
    background-color: rgb(255, 255, 255); /* Solid white background */
    transition: opacity 200ms ease-out;
}

/* Smooth loading overlay transitions */
.carousel-loading-overlay {
    animation: fadeIn 150ms ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}